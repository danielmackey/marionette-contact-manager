<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Contact Manager</title>
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/application.css">
</head>
<body>

  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="brand">Contact Manager</span>
      </div>
    </div>
  </div>

  <div id="main-region" class="container">
    <p>Here is static content</p>
  </div>

  <script type="text/template" id="contact-list-item">
    <%- firstName %> <%- lastName %>
  </script>

  <script type="text/javascript" src="./assets/js/vendor/jquery-2.1.0.js"></script>
  <script type="text/javascript" src="./assets/js/vendor/json2.js"></script>
  <script type="text/javascript" src="./assets/js/vendor/underscore.js"></script>
  <script type="text/javascript" src="./assets/js/vendor/backbone.js"></script>
  <script type="text/javascript" src="./assets/js/vendor/backbone.marionette.js"></script>

  <script type="text/javascript">
    var ContactManager = new Marionette.Application();

    ContactManager.addRegions({
      mainRegion: '#main-region'
    });

    ContactManager.Contact = Backbone.Model.extend({
      defaults: {
        firstName: '',
        phoneNumber: 'No phone number!'
      }
    });

    ContactManager.ContactCollection = Backbone.Collection.extend({
      model: ContactManager.Contact,
      comparator: function(item){
        return item.get('firstName') + item.get('lastName');
      }
    })

    ContactManager.ContactItemView = Marionette.ItemView.extend({
      tagName: 'li',
      template: '#contact-list-item'
    });

    ContactManager.ContactsView = Marionette.CollectionView.extend({
      tagName: 'ul',
      itemView: ContactManager.ContactItemView
    })

    ContactManager.on('initialize:after', function(){
      var contacts = new ContactManager.ContactCollection([
        {
          firstName: 'Alice',
          lastName: 'Tampen'
        },{
          firstName: 'Bob',
          lastName: 'Brigham'
        },{
          firstName: 'Alice',
          lastName: 'Artsy'
        },{
          firstName: 'Alice',
          lastName: 'Arten'
        },{
          firstName: 'Charlie',
          lastName: 'Campbell'
        },
      ]);

      var contactsListView = new ContactManager.ContactsView({
        collection: contacts
      });

      ContactManager.mainRegion.show(contactsListView);
    });

    ContactManager.start();
  </script>
</body>
</html>